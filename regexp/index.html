<!doctype html>
<html lang=en>
<head>
	<title>regexp</title>
	<meta charset=utf-8>
	<meta name=viewport content="width=device-width, initial-scale=1.0">
	<meta name=description content="word filter">
	<link rel="stylesheet" href="../_src/main.css">
	<script type=module src="../_src/data-lang.js"></script>
</head>

<body>

<div style="display: flex; justify-content: space-between;">
	<h2>
		<a href="../"><i><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1792 1792">
			<path d="M1683 806C1698 735 1671 634 1623 581L1215 128C1167 74 1072 49 1004 71L424 259C355 282 282 355 259 424L71 1004C49 1072 74 1167 128 1215L581 1623C634 1671 735 1698 806 1683L1402 1557C1472 1542 1542 1472 1557 1402ZM901 630C850 790 910 1011 1033 1124L1263 1334C1387 1447 1514 1413 1547 1258L1609 969C1642 815 1582 594 1476 476L1279 257C1173 139 1046 173 995 333ZM1429 753A103 179 -15 1 0 1229 807A103 179 -15 1 0 1429 753ZM711 338A78 134 -135 1 0 821 448A78 134 -135 1 0 711 338ZM338 711A78 134 -135 1 0 448 821A78 134 -135 1 0 338 711Z" fill-rule="evenodd" stroke-width="0"/>
		</svg></i></a> <span data-lang>word list // liste de mots // Wortliste // lista de palabras</span>
	</h2>
	<data-lang>en fr de es</data-lang>
</div>
<hr>

<!-- <details>
	<summary data-lang>examples // exemples // Beispiele // ejemplos</summary>
	<li data-lang>
		<a lang=en href="./#en/1sqfEBX,BWl1Cs2xNv;j0kyVf~+tT?zJ,RFoq@j6OntNx_:MP/NMIpSj9s~2_F$kN&?i1hp2jjHE:/f)rbhwzJ/f+3wk0tm5Z=hrG">
		variable rate and duration investment
		</a>
		<a lang=fr href="./#fr/1sqfEBX,BWl1Cs2xNv;j0kyVf~+tT?zJ,RFoq@j6OntNx_:MP/NMIpSj9s~2_F$kN&?i1hp2jjHE:/f)rbhwzJ/f+3wk0tm5Z=hrG">
		investissement à durée et rendement variable
	</a></li>
</details>
 -->
<h3 data-lang>regex filter // filtre regex // Regex Filter // filtro regexp</h3>
<pre><textarea id=regexp rows=1 autofocus>^ex.{6}$</textarea></pre>

<h3><span data-lang>results // résultats // Ergebnisse // resultados</span> (<span id=count>0</span>)</h3>
<pre id=result style=column-count:auto;column-width:30ch;></pre>

<script type=module>
import hashData from '../_src/hash-data.js'

const $ = ids => document.getElementById(ids[0]),
			dics = {}

async function fetchList(lang) {
	const url = `https://raw.githubusercontent.com/lorenbrichter/Words/master/Words/${lang}.txt`
	return dics[lang] || (dics[lang] = (await (await fetch(url)).text()).trim().split(/[ ;,]*[\r\n]\s*/))
}

let last = ''

function showList(list) {
	$`result`.textContent=list.join('\n')
	$`count`.textContent=list.length
}

const dohash = hashData(data => {
	const lang = document.documentElement.lang,
				code = data || $`regexp`.value
	showList([])
	last = lang + code
	fetchList(lang).then(dic => {
		if (lang + code === last) { //if not, another callback will follow
			//TODO RAF
			showList(dic.filter( w => new RegExp(code, 'iu').test(w)))
		}
	}).catch(e=>console.warn(e.message))
})

$`regexp`.oninput = evt => dohash(evt.currentTarget.value)

</script>
</body>
